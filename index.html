<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–Ω–µ–≤–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è: 4 –ø—Ä–∏–µ–º–∞</title>
   <style>
    :root {
        /* –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Telegram –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–º–µ–Ω—ã —Ç–µ–º */
        --bg-color: var(--tg-theme-bg-color, #f0f2f5);
        --card-bg: var(--tg-theme-secondary-bg-color, #ffffff);
        --text-color: var(--tg-theme-text-color, #2d3436);
        --hint-color: var(--tg-theme-hint-color, #636e72);
        --accent-color: var(--tg-theme-button-color, #0984e3);
        
        /* –¶–≤–µ—Ç–∞ –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏–π (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–¥ —Ç–µ–º–Ω—ã–π —Ñ–æ–Ω) */
        --half-color: rgba(255, 243, 205, 0.2);
        --full-color: rgba(209, 231, 221, 0.2);
        --border-color: var(--tg-theme-hint-color, #dfe6e9);
    }

    body { 
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
        background-color: var(--bg-color); 
        color: var(--text-color); 
        margin: 0; 
        padding: 15px; 
        font-size: 17px; /* –£–≤–µ–ª–∏—á–∏–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–π —à—Ä–∏—Ñ—Ç */
        line-height: 1.5;
    }

    .container { max-width: 600px; margin: 0 auto; }
    
    header { text-align: center; margin-bottom: 25px; }
    header h1 { font-size: 1.8rem; margin-bottom: 5px; }
    header p { color: var(--hint-color); font-size: 0.95rem; }
    
    .meal-card { 
        background: var(--card-bg); 
        border-radius: 16px; 
        padding: 16px; 
        margin-bottom: 20px; 
        box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
    }

    .meal-title { 
        font-size: 1.4rem; /* –£–≤–µ–ª–∏—á–∏–ª–∏ */
        font-weight: bold;
        margin-bottom: 15px; 
        color: var(--accent-color); 
        display: block;
    }
    
    .group-header { 
        font-weight: 600; 
        font-size: 1rem; /* –£–≤–µ–ª–∏—á–∏–ª–∏ */
        color: var(--text-color); 
        margin: 15px 0 10px 0; 
        display: flex; 
        align-items: center; 
        gap: 8px; 
        opacity: 0.9;
    }

    .limit-badge { 
        background: rgba(128, 128, 128, 0.1); 
        padding: 2px 10px; 
        border-radius: 20px; 
        font-size: 0.75rem; 
        color: var(--hint-color);
    }

    .products-list { display: flex; flex-direction: column; gap: 10px; }
    
    .product-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 14px 16px; /* –ë–æ–ª—å—à–µ –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –Ω–∞–∂–∞—Ç–∏—è –ø–∞–ª—å—Ü–µ–º */
        border: 1px solid rgba(128, 128, 128, 0.2);
        border-radius: 12px;
        cursor: pointer;
        background: var(--bg-color);
        transition: transform 0.1s ease;
        -webkit-tap-highlight-color: transparent; /* –£–±–∏—Ä–∞–µ—Ç —Å–∏–Ω—é—é —Ä–∞–º–∫—É –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    }

    .product-item:active { transform: scale(0.98); }

    /* –°–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞–∂–∞—Ç–∏—è */
    .status-half { 
        background-color: #f1c40f !important; 
        color: #000 !important; 
        border-color: #f1c40f !important; 
    }
    .status-full { 
        background-color: #2ecc71 !important; 
        color: #000 !important; 
        border-color: #2ecc71 !important; 
    }

    .weight-label { 
        color: var(--hint-color); 
        font-size: 0.9rem; 
    }
    
    .status-half .weight-label, .status-full .weight-label {
        color: #000;
        font-weight: bold;
    }
</style>
</head>
<body>

<div class="container">
    <header>
        <h1>–î–Ω–µ–≤–Ω–∏–∫ —Ä–∞—Ü–∏–æ–Ω–∞</h1>
        <p>–ù–∞–∂–º–∏ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç: 1 —Ä–∞–∑ (0.5), 2 —Ä–∞–∑–∞ (1.0), 3 —Ä–∞–∑–∞ (–æ—Ç–º–µ–Ω–∞)</p>
    </header>
    <div id="app"></div>
</div>

<script>
// –î–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Å –±–∞–∑–æ–≤—ã–º –≤–µ—Å–æ–º (–¥–ª—è 1 –ø–æ—Ä—Ü–∏–∏)
const dietData = [
    {
        name: "1Ô∏è‚É£ –ü—Ä–∏–µ–º –ø–∏—â–∏",
        groups: [
            { id: "1–∞", title: "üìå –∞) –°–ª–æ–∂–Ω—ã–µ —É–≥–ª–µ–≤–æ–¥—ã", items: [
                { n: "–ë–æ–±–æ–≤—ã–µ", w: 40 }, { n: "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å", w: 140 }, { n: "–ö—É–∫—É—Ä—É–∑–∞ —Å–≤–µ–∂–∞—è", w: 140 }, { n: "–†–∏—Å (–Ω–µ —à–ª–∏—Ñ.)", w: 40 },
                { n: "–õ—é–±–∞—è –∫—Ä—É–ø–∞", w: 40 }, { n: "–¶/–∑ –º—É–∫–∞", w: 40 }, { n: "–•–ª–µ–±—Ü—ã", w: 60 }, { n: "–¶/–∑ —Ö–ª–µ–±", w: 65 },
                { n: "–ú–∞–∫–∞—Ä–æ–Ω—ã —Ç–≤. —Å–æ—Ä—Ç–æ–≤", w: 40 }, { n: "–õ–∞–≤–∞—à", w: 60 }
            ]},
            { id: "1–±", title: "üìå –±) –ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã", items: [
                { n: "–¢–≤–æ—Ä–æ–≥ –Ω–µ–∂–∏—Ä–Ω—ã–π (0.2%)", w: 160 }, { n: "–°—ã—Ä—ã (–º—è–≥–∫–∏–µ/—Ç–≤)", w: 30 }, { n: "–°–º–µ—Ç–∞–Ω–∞ 15%", w: 65 },
                { n: "–ö–µ—Ñ–∏—Ä 1%", w: 270 }, { n: "–ô–æ–≥—É—Ä—Ç 1%", w: 250 }, { n: "–ú–æ–ª–æ–∫–æ 1%", w: 280 }
            ]},
            { id: "1–≤", title: "üìå –≤) –ß—Ç–æ —É–≥–æ–¥–Ω–æ / –§—Ä—É–∫—Ç—ã", items: [
                { n: "–ß—Ç–æ —É–≥–æ–¥–Ω–æ (—Å–ª–∞–¥–∫–æ–µ/—Å–Ω–µ–∫–∏)", w: 100 }, { n: "–§—Ä—É–∫—Ç—ã", w: 1000 }, { n: "–ë–∞–Ω–∞–Ω—ã", w: 600 }
            ]}
        ]
    },
    {
        name: "2Ô∏è‚É£ –ü—Ä–∏–µ–º –ø–∏—â–∏",
        groups: [
            { id: "2–≥", title: "üìå –≥) –°–ª–æ–∂–Ω—ã–µ —É–≥–ª–µ–≤–æ–¥—ã", items: [
                { n: "–ë–æ–±–æ–≤—ã–µ", w: 40 }, { n: "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å", w: 140 }, { n: "–ö—É–∫—É—Ä—É–∑–∞ —Å–≤–µ–∂–∞—è", w: 140 }, { n: "–†–∏—Å (–Ω–µ —à–ª–∏—Ñ.)", w: 40 },
                { n: "–õ—é–±–∞—è –∫—Ä—É–ø–∞", w: 40 }, { n: "–ú–∞–∫–∞—Ä–æ–Ω—ã —Ç–≤. —Å–æ—Ä—Ç–æ–≤", w: 40 }
            ]},
            { id: "2–¥", title: "üìå –¥) –ë–µ–ª–∫–∏", items: [
                { n: "–¢–µ–ª—è—Ç–∏–Ω–∞", w: 165 }, { n: "–ü–µ—á–µ–Ω—å", w: 165 }, { n: "–ö—É—Ä–∏–Ω–æ–µ/–ò–Ω–¥—é—à–∏–Ω–æ–µ —Ñ–∏–ª–µ", w: 175 },
                { n: "–†—ã–±–∞ (–¥–æ 5%)", w: 175 }, { n: "–†—ã–±–∞ (–∂–∏—Ä–Ω–∞—è)", w: 140 }, { n: "2 —è–π—Ü–∞", w: 1 }, { n: "–ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã", w: 220 }
            ]},
            { id: "2–µ", title: "üìå –µ) –û–≤–æ—â–∏ / –ì—Ä–∏–±—ã", items: [
                { n: "–û–≤–æ—â–∏ / –ö–≤–∞—à–µ–Ω—ã–µ / –ó–µ–ª–µ–Ω—å", w: 300 }, { n: "–ì—Ä–∏–±—ã", w: 300 }
            ]},
            { id: "2—ë", title: "üìå —ë) –ñ–∏—Ä—ã / –°–æ—É—Å—ã", items: [
                { n: "–ú–∞—Å–ª–æ –ª—é–±–æ–µ", w: 10 }, { n: "–ú–∞–π–æ–Ω–µ–∑", w: 13 }, { n: "–ê–≤–æ–∫–∞–¥–æ", w: 55 }, { n: "–û–ª–∏–≤–∫–∏", w: 70 },
                { n: "–ì–æ—Ä—á–∏—Ü–∞", w: 24 }, { n: "–ö–µ—Ç—á—É–ø", w: 36 }, { n: "–°–∞–ª–æ", w: 9 }
            ]}
        ]
    },
    {
        name: "3Ô∏è‚É£ –ü—Ä–∏–µ–º –ø–∏—â–∏",
        groups: [
            { id: "3–∂", title: "üìå –∂) –ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã", items: [
                { n: "–¢–≤–æ—Ä–æ–≥ –Ω–µ–∂–∏—Ä–Ω—ã–π (0.2%)", w: 190 }, { n: "–°—ã—Ä—ã", w: 40 }, { n: "–°–º–µ—Ç–∞–Ω–∞ 15%", w: 75 },
                { n: "–ö–µ—Ñ–∏—Ä 1%", w: 330 }, { n: "–ô–æ–≥—É—Ä—Ç 1%", w: 330 }, { n: "–ú–æ–ª–æ–∫–æ 1%", w: 335 }
            ]},
            { id: "3–∑", title: "üìå –∑) –§—Ä—É–∫—Ç—ã –∏ —è–≥–æ–¥—ã", items: [
                { n: "–§—Ä—É–∫—Ç—ã –∏ —è–≥–æ–¥—ã", w: 320 }, { n: "–ë–∞–Ω–∞–Ω—ã/–í–∏–Ω–æ–≥—Ä–∞–¥/–•—É—Ä–º–∞", w: 190 }
            ]},
            { id: "3–∏", title: "üìå –∏) –û—Ä–µ—Ö–∏ –∏ —Å–µ–º–µ–Ω–∞", items: [
                { n: "–ì—Ä–µ—Ü–∫–∏–µ –æ—Ä–µ—Ö–∏ / –°–µ–º–µ–Ω–∞", w: 15 }
            ]}
        ]
    },
    {
        name: "4Ô∏è‚É£ –ü—Ä–∏–µ–º –ø–∏—â–∏",
        groups: [
            { id: "4–∏", title: "üìå –∏) –ë–µ–ª–∫–∏", items: [
                { n: "–¢–µ–ª—è—Ç–∏–Ω–∞", w: 165 }, { n: "–ü–µ—á–µ–Ω—å", w: 165 }, { n: "–§–∏–ª–µ –ø—Ç–∏—Ü—ã", w: 175 },
                { n: "–†—ã–±–∞ (–¥–æ 5%)", w: 175 }, { n: "–†—ã–±–∞ (–∂–∏—Ä–Ω–∞—è)", w: 140 }, { n: "–ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã", w: 220 }
            ]},
            { id: "4–π", title: "üìå –π) –û–≤–æ—â–∏ / –ì—Ä–∏–±—ã", items: [
                { n: "–û–≤–æ—â–∏ –∏ –∑–µ–ª–µ–Ω—å", w: 300 }, { n: "–ì—Ä–∏–±—ã", w: 300 }
            ]},
            { id: "4–∫", title: "üìå –∫) –ñ–∏—Ä—ã", items: [
                { n: "–ú–∞—Å–ª–æ", w: 10 }, { n: "–ú–∞–π–æ–Ω–µ–∑", w: 13 }, { n: "–ê–≤–æ–∫–∞–¥–æ", w: 55 }, { n: "–û–ª–∏–≤–∫–∏", w: 70 }, { n: "–°–∞–ª–æ", w: 9 }
            ]}
        ]
    }
];

let eaten = {};

function eat(groupId, itemName) {
    const key = `${groupId}_${itemName}`;
    
    // –°—É–º–º–∞ –ø–æ –≥—Ä—É–ø–ø–µ
    let groupSum = 0;
    for (let k in eaten) {
        if (k.startsWith(groupId + "_") && k !== key) {
            groupSum += eaten[k];
        }
    }

    const current = eaten[key] || 0;
    let next;

    if (current === 0) {
        next = (groupSum + 0.5 <= 1) ? 0.5 : 0;
    } else if (current === 0.5) {
        next = (groupSum + 1 <= 1) ? 1 : 0;
    } else {
        next = 0;
    }

    eaten[key] = next;
    render();
}

function render() {
    const app = document.getElementById('app');
    let html = '';

    dietData.forEach(meal => {
        html += `<div class="meal-card"><div class="meal-title">${meal.name}</div>`;
        
        meal.groups.forEach(group => {
            html += `
                <div class="group-container">
                    <div class="group-header">
                        ${group.title} <span class="limit-badge">–ª–∏–º–∏—Ç 1 –ø–æ—Ä—Ü–∏—è</span>
                    </div>
                    <div class="products-list">
            `;

            group.items.forEach(item => {
                const key = `${group.id}_${item.n}`;
                const val = eaten[key] || 0;
                
                let cls = '';
                let weightText = (item.w === 1) ? `${item.n}` : `${item.n} (${item.w} –≥)`;
                
                if (val === 0.5) {
                    cls = 'status-half';
                    if (item.w > 1) weightText = `${item.n} (${item.w / 2} –≥)`;
                    if (item.w === 1) weightText = `${item.n} (1/2 –ø–æ—Ä—Ü–∏–∏)`;
                } else if (val === 1) {
                    cls = 'status-full';
                }

                html += `
                    <div class="product-item ${cls}" onclick="eat('${group.id}', '${item.n}')">
                        <span>${item.n}</span>
                        <span class="weight-label">${val > 0 ? (val === 0.5 ? '¬Ω –ø–æ—Ä—Ü–∏–∏' : '1 –ø–æ—Ä—Ü–∏—è') : weightText}</span>
                    </div>`;
            });

            html += `</div></div>`;
        });
        html += `</div>`;
    });

    app.innerHTML = html;
}

document.addEventListener('DOMContentLoaded', render);
</script>

</body>

</html>
